document.addEventListener("DOMContentLoaded", function() {
    'use strict';
    var d = document.querySelector('html'),
        q = document.querySelector(".icon__menu"),
        k = document.querySelector(".nav__icon-close"),
        e = document.querySelector(".main-nav"),
        g = document.querySelector(".icon__search"),
        j = document.querySelector(".search__close"),
        h = document.querySelector(".search__text"),
        c = document.querySelector(".search"),
        i = document.querySelector(".search__box"),
        f = document.querySelector(".toggle-theme"),
        s = document.querySelector(".top"),
        t, a;
    q.addEventListener("click", () => { l() }), k.addEventListener("click", () => { m() });

    function l() { e.classList.add("is-open") }

    function m() { e.classList.remove("is-open") }
    g.addEventListener("click", () => { n() }), j.addEventListener("click", () => { o() });

    function n() { c.classList.add("is-visible"), setTimeout(function() { h.focus() }, 250) }

    function o() { c.classList.remove("is-visible") }
    i.addEventListener("keydown", function(a) {
        (a.target == this || a.keyCode == 27) && c.classList.remove('is-visible')
    }), f && f.addEventListener("click", () => { p() });

    function p() { d.classList.contains('dark-mode') ? (d.classList.remove('dark-mode'), localStorage.removeItem("theme"), document.documentElement.removeAttribute("dark")) : (d.classList.add('dark-mode'), localStorage.setItem("theme", "dark"), document.documentElement.setAttribute("dark", "")) }
    reframe(".post__content iframe:not(.reframe-off), .page__content iframe:not(.reframe-off)"), t = new LazyLoad({ elements_selector: ".lazy" });
    const r = document.querySelector(".page__content img, .post__content img, .gallery__image img"),
        b = document.querySelectorAll(".page__content a img, .post__content a img, .gallery__image a img");
    if (b) { for (a = 0; a < b.length; a++) b[a].parentNode.classList.add("image-link"); for (a = 0; a < b.length; a++) b[a].classList.add("no-lightense") }
    r && Lightense(".page__content img:not(.no-lightense), .post__content img:not(.no-lightense), .gallery__image img:not(.no-lightense)", { padding: 60, offset: 30 }), document.querySelectorAll(".tag__link, .top__link").forEach(a => { a.addEventListener("click", function(a) { a.preventDefault(), document.querySelector(this.getAttribute("href")).scrollIntoView({ behavior: "smooth" }) }) }), s.addEventListener("click", function() { window.scrollY != 0 && window.scrollTo({ top: 0, left: 0, behavior: "smooth" }) })
})